const Max = 2
range Int = 0..Max
const Pmax = 10
range Prange = 0..Pmax

SEMAPHORE(I=0) = SEMA[I],
SEMA[v:Int] = (when(v<Max) put[i:Prange]->SEMA[v+1]
                 |when(v>0) get[i:Prange]->SEMA[v-1]).

QUEUEDATA = (put[i:Prange] -> get[i] -> QUEUEDATA).

PRODUCER =(put[i:Prange]->PRODUCER).

CONSUMER =(get[i:Prange]->CONSUMER).

||BOUNDEDBUFFER = ({q1,q2}::PRODUCER || {q1,q2}::CONSUMER
                  ||{q1,q2}::SEMAPHORE(0) || {q1,q2}:QUEUEDATA)
		  @{put,get}.