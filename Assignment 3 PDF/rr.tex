\documentclass[]{article}
\usepackage[UKenglish]{babel}
\usepackage{fixltx2e}
\usepackage{multicol}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{float}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{tikz} 	%Graph paper
\usepackage{listings}					%Code snippet
\usepackage{color} 						%red, green, blue, yellow, cyan, magenta, black, white
\definecolor{mygreen}{RGB}{28,172,0} 	% color values Red, Green, Blue
\definecolor{mylilas}{RGB}{170,55,241}
\usepackage{mdframed} % framed textboxes

\title{\textbf{Software Design III 3BB4} \\ \textit{Assignment III}}
\date{March 17, 2015}
\author{
	\begin{tabular}{c c c c}
		Jadees Anton & Connor Hallett & Spencer Lee & Nicolas Lelievre \\
		\textit{1213386} & \textit{1158083} & \textit{1224941} & \textit{1203446}
	\end{tabular}
}

\begin{document}
\maketitle
\setlength{\pdfpagewidth}{8.5in}
\setlength{\pdfpageheight}{11in}

\lstset{ %language=Matlab,
	%basicstyle=\color{red},
	breaklines=true,%
	morekeywords={matlab2tikz},
	keywordstyle=\color{blue},%
	morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},
	identifierstyle=\color{black},%
	stringstyle=\color{mylilas},
	commentstyle=\color{mygreen},%
	showstringspaces=false,%without this there will be a symbol in the places where there is a space
	numbers=left,%
	numberstyle={\small \color{gray}},% size of the numbers
	numbersep=12pt, % this defines how far the numbers are from the text
	emph=[1]{for,end,break},emphstyle=[1]\color{red}, %some words to emphasise
	%emph=[2]{word1,word2}, emphstyle=[2]{style},    
}

\section*{Round Robin Scheduler}
This document elaborates on how the \verb|rr.lts| LTS functions in order to schedule a series of processes using round-robin scheduling. \par
Below is said LTS model. \vspace{2mm}
\begin{lstlisting}[language=Python, frame=l]
 const MaxIF=6
 range IF=0..MaxIF-1
 const MaxCPU=5
 range CPUT = 0..MaxCPU

 GENERATOR=GENERATOR[0],
 GENERATOR[num:IF] = (enqueue[num] -> GENERATOR[(num+1)%MaxIF]).

 QUEUE = (enqueue[num:IF] -> QUEUE[num]),
 QUEUE[n0:IF] = (
    enqueue[num:IF] -> QUEUE[n0][num]
    | cpu.load[n0] -> QUEUE),
 QUEUE[n0:IF][n1:IF] = (
    enqueue[num:IF] -> QUEUE[n0][n1][num]
    | cpu.load[n0] -> QUEUE[n1]),
 QUEUE[n0:IF][n1:IF][n2:IF] = (
    enqueue[num:IF] -> QUEUE[n0][n1][n2][num]
    | cpu.load[n0] -> QUEUE[n1][n2]),
 QUEUE[n0:IF][n1:IF][n2:IF][n3:IF] = (
    enqueue[num:IF] -> QUEUE[n0][n1][n2][n3][num]
    | cpu.load[n0] -> QUEUE[n1][n2][n3]),
 QUEUE[n0:IF][n1:IF][n2:IF][n3:IF][n4:IF] = (
    enqueue[num:IF] -> QUEUE[n0][n1][n2][n3][n4][num]
    | cpu.load[n0] -> QUEUE[n1][n2][n3][n4]),
 QUEUE[n0:IF][n1:IF][n2:IF][n3:IF][n4:IF][n5:IF] = (
    cpu.load[n0] -> QUEUE[n1][n2][n3][n4][n5]).

 CPU = CPU[0],
 CPU[t:CPUT] = (
    when (t==0) load[c:IF] -> quantums[i:1..MaxCPU] -> CPU[i]
    | when (t!=0) tick -> CPU[t-1]).

 ||RR_SCHEDULER=(cpu:CPU || GENERATOR || QUEUE).
\end{lstlisting}
	
\subsection*{GENERATOR}
The \verb|GENERATOR| creates processes to be executed by the \verb|CPU|. As long as there is enough space for a new process in the queue, \verb|GENERATOR| enqueues it. \par \vspace{2mm}

\begin{mdframed}[backgroundcolor=lightgray!40]
	\textbf{Design Decision I} \par 
	\textit{Processes to be executed have run-times that are later defined by the system.}
\end{mdframed}

\vspace{2mm}

The \verb|GENERATOR| pushes processes to the queue in a \textit{first-in-first-out} (FIFO) manner. As per the requirements outlined by the assignment,  processes are immediately enqueued but not loaded into the CPU at this point in execution. 

\subsection*{QUEUE}
The \verb|QUEUE| holds processes (generated by \verb|GENERATOR|) that are ready for execution by the \verb|CPU|. \par \vspace{2mm}

\begin{mdframed}[backgroundcolor=lightgray!40]
	\textbf{Design Decision II} \par 
	\textit{The} \verb|QUEUE| \textit{currently has space for 6 processes that are ready for execution. These processes, however, are infinitely expandable.}
\end{mdframed}

\vspace{2mm}

Our \verb|QUEUE| holds and enqueues the processes waiting for execution in a  \textit{first-in-first-out} (FIFO) manner. 

\subsection*{CPU}
The \verb|CPU| takes the first process from \verb|QUEUE| that is ready to be executed and loads it, similar to the functionality theorised by \verb|DISPATCHER|. Process execution time is defined by the user at this step. \par \vspace{2mm}

\begin{mdframed}[backgroundcolor=lightgray!40]
	\textbf{Design Decision III} \par 
	\textit{Any process that has been selected to execute will run until completion. Note that the process will not be re-queued at the end of said queue.}
\end{mdframed}

\vspace{2mm}

Once a process execution has been completed, the \verb|CPU| unloads it, similar to the functionality of \verb|GRIMREAPER|. 

\vspace{2mm}

\begin{mdframed}[backgroundcolor=lightgray!40]
	\textbf{Design Decision IV} \par 
	\verb|CPU| \textit{also contains the functionalities of} \verb|DISPATCHER| \textit{and} \verb|GRIMREAPER|.
\end{mdframed}

\subsection*{RR SCHEDULER}
\verb|RR_SCHEDULER| is a parallel composition of the above three processes. Hence, it assembles/concatenates these defined processes in order to create a comprehensive model including all necessary components of the described system. \par \vspace{2mm}
Also note that our implementation of \verb|RR_SCHEDULER| is completely deadlock-free due to the user-scalable quantum defined within the system.
\end{document}

